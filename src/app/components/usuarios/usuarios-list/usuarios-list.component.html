<div class="container-fluid">

  <div class="d-flex mt-2 ">
    <div>
      <h5 class="p-2">Lista de Usuarios</h5>
    </div>
    <div class="ml-auto">
      <!-- Open Modal Crear Usuario -->
      <button class="btn btn-outline-primary mb-2 me-2" (click)="openVerticallyCentered(content)"> + Usuario </button>
    </div>
  </div>

    <table class="table table-hover table-striped table-bordered">
        <thead class="thead-dark">
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Correo</th>
            <th scope="col">Contraseña</th>
            <th scope="col">Rol</th>
            <th scope="col">Fecha de Creación</th>
            <th scope="col">Creado por</th>
            <th scope="col">Opciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let usuario of usuarios?.reverse()">
            <th class="text-muted"><small><strong>{{ usuario.id }}</strong></small></th>
            <td>{{ usuario.correo }}</td>
            <td>********</td>
            <td>{{ usuario.rol }}</td>
            <td class="text-muted"><small>{{ usuario.fecha_creacion }} </small></td>
            <td class="text-muted"><small>{{ usuario.id_usuario }} </small></td>
            <td class="text-center">
                <button class="btn btn-outline-primary my-2 my-sm-0 btn-sm" (click)="selectedIdUser(usuario.id)"
                  ngbTooltip="Ver o actualizar información"><strong>!</strong>
                </button>
                <button class="btn btn-outline-danger my-2 my-sm-0 btn-sm ml-2" (click)="deleteUser(usuario.id, usuario.correo)"
                  ngbTooltip="Eliminar completamente"> <strong>x</strong>
                </button>
            </td>
          </tr>
        </tbody>
      </table>


<!-- Modal Crear Usuario -->
<ng-template #content let-c="close" let-d="dismiss">
	<div class="modal-header">
		<h4 class="modal-title">Modal title</h4>
		<button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')">X</button>
	</div>
	<div class="modal-body">
		
    <form [formGroup]="formularioUsuario">
     
      <div class="form-group">
          <small class="text-muted">Correo</small>
          <input type="email" class="form-control" formControlName="correo" placeholder="Ingrese su correo electrónico">
          <div *ngIf="formularioUsuario.controls['correo'].invalid && formularioUsuario.controls['correo'].dirty" class="alert alert-danger" role="alert">
            <span *ngIf="formularioUsuario.controls['correo'].errors.required">El correo es requerido</span>
              <span *ngIf="formularioUsuario.controls['correo'].errors.email">El correo no es válido</span>
          </div>
      </div>
      <div class="form-group">
          <small class="text-muted">Contraseña</small>
          <input type="password" class="form-control" formControlName="llave" placeholder="Ingrese su contraseña">
          <div *ngIf="formularioUsuario.controls['llave'].invalid && formularioUsuario.controls['llave'].dirty" class="alert alert-danger" role="alert">
              <span *ngIf="formularioUsuario.controls['llave'].errors.required">La contraseña es requerida</span> 
          </div>
      </div>
      <div class="form-group">
          <small class="text-muted">Rol</small>
          <select class="form-control" formControlName="rol">
              <option value="">Selecciona una opción</option>
              <option>admin</option>
              <option>asistente</option>
              <option>recepcionista</option>
              <option>cajero</option>
              <option>invitado</option>
          </select>
          <div *ngIf="formularioUsuario.controls['rol'].invalid && formularioUsuario.controls['rol'].dirty" class="alert alert-danger" role="alert">
            <span *ngIf="formularioUsuario.controls['rol'].errors.required">El rol es requerido</span>
          </div>
      </div>

      <button type="submit" class="btn btn-primary btn-block" (click)="crearUsuario()" [disabled]="formularioUsuario.invalid" >Agregar</button>
    </form>

	</div>
	<div class="modal-footer">
    <button type="button" class="btn btn-light" (click)="limpiarForm()">Limpiar</button>
		<button type="button" class="btn btn-light" (click)="c('Cerrar')">Cerrar</button>
	</div>
</ng-template>




</div>
